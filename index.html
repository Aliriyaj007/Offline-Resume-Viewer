<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Offline Resume Viewer - See how your resume actually reads, instantly, without uploading anywhere">
    <title>Offline Resume Viewer</title>
    
    <style>
        /* ============================================
           CSS CUSTOM PROPERTIES & THEMES
           ============================================ */
        :root {
            /* Base sizing */
            --max-width: 1400px;
            --header-height: 70px;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 30px rgba(0,0,0,0.12);
            --transition: 0.2s ease;
            
            /* Typography */
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-mono: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
        }

        /* Light Theme (Default) */
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --border-color: #e2e8f0;
            --accent-primary: #2563eb;
            --accent-secondary: #3b82f6;
            --accent-light: #dbeafe;
            --weak-phrase-bg: #fef2f2;
            --weak-phrase-border: #fecaca;
            --weak-phrase-text: #dc2626;
            --success: #16a34a;
            --warning: #ca8a04;
        }

        /* Dark Theme */
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
            --border-color: #334155;
            --accent-primary: #60a5fa;
            --accent-secondary: #3b82f6;
            --accent-light: #1e3a5f;
            --weak-phrase-bg: #450a0a;
            --weak-phrase-border: #7f1d1d;
            --weak-phrase-text: #fca5a5;
            --success: #4ade80;
            --warning: #fbbf24;
        }

        /* Sepia Theme */
        [data-theme="sepia"] {
            --bg-primary: #fefbf3;
            --bg-secondary: #fef3c7;
            --bg-tertiary: #fde68a;
            --text-primary: #451a03;
            --text-secondary: #78350f;
            --text-muted: #a16207;
            --border-color: #fcd34d;
            --accent-primary: #b45309;
            --accent-secondary: #d97706;
            --accent-light: #fef3c7;
            --weak-phrase-bg: #fef2f2;
            --weak-phrase-border: #fecaca;
            --weak-phrase-text: #dc2626;
            --success: #15803d;
            --warning: #a16207;
        }

        /* Ocean Theme */
        [data-theme="ocean"] {
            --bg-primary: #f0fdfa;
            --bg-secondary: #ccfbf1;
            --bg-tertiary: #99f6e4;
            --text-primary: #134e4a;
            --text-secondary: #115e59;
            --text-muted: #0d9488;
            --border-color: #5eead4;
            --accent-primary: #0891b2;
            --accent-secondary: #06b6d4;
            --accent-light: #cffafe;
            --weak-phrase-bg: #fef2f2;
            --weak-phrase-border: #fecaca;
            --weak-phrase-text: #dc2626;
            --success: #059669;
            --warning: #d97706;
        }

        /* Forest Theme */
        [data-theme="forest"] {
            --bg-primary: #f0fdf4;
            --bg-secondary: #dcfce7;
            --bg-tertiary: #bbf7d0;
            --text-primary: #14532d;
            --text-secondary: #166534;
            --text-muted: #16a34a;
            --border-color: #86efac;
            --accent-primary: #15803d;
            --accent-secondary: #22c55e;
            --accent-light: #dcfce7;
            --weak-phrase-bg: #fef2f2;
            --weak-phrase-border: #fecaca;
            --weak-phrase-text: #dc2626;
            --success: #059669;
            --warning: #ca8a04;
        }

        /* Slate Theme */
        [data-theme="slate"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --bg-tertiary: #cbd5e1;
            --text-primary: #1e293b;
            --text-secondary: #334155;
            --text-muted: #64748b;
            --border-color: #94a3b8;
            --accent-primary: #475569;
            --accent-secondary: #64748b;
            --accent-light: #e2e8f0;
            --weak-phrase-bg: #fef2f2;
            --weak-phrase-border: #fecaca;
            --weak-phrase-text: #dc2626;
            --success: #16a34a;
            --warning: #ca8a04;
        }

        /* Midnight Theme */
        [data-theme="midnight"] {
            --bg-primary: #1e1b4b;
            --bg-secondary: #312e81;
            --bg-tertiary: #4338ca;
            --text-primary: #e0e7ff;
            --text-secondary: #c7d2fe;
            --text-muted: #a5b4fc;
            --border-color: #4338ca;
            --accent-primary: #818cf8;
            --accent-secondary: #a5b4fc;
            --accent-light: #312e81;
            --weak-phrase-bg: #450a0a;
            --weak-phrase-border: #7f1d1d;
            --weak-phrase-text: #fca5a5;
            --success: #4ade80;
            --warning: #fbbf24;
        }

        /* Paper Theme */
        [data-theme="paper"] {
            --bg-primary: #fffbeb;
            --bg-secondary: #fef3c7;
            --bg-tertiary: #fde68a;
            --text-primary: #1c1917;
            --text-secondary: #44403c;
            --text-muted: #78716c;
            --border-color: #d6d3d1;
            --accent-primary: #854d0e;
            --accent-secondary: #a16207;
            --accent-light: #fef3c7;
            --weak-phrase-bg: #fef2f2;
            --weak-phrase-border: #fecaca;
            --weak-phrase-text: #dc2626;
            --success: #16a34a;
            --warning: #ca8a04;
        }

        /* ============================================
           BASE STYLES
           ============================================ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: background var(--transition), color var(--transition);
        }

        /* ============================================
           HEADER
           ============================================ */
        .header {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background var(--transition), border var(--transition);
        }

        .header-content {
            max-width: var(--max-width);
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .logo-text h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .logo-text p {
            font-size: 0.75rem;
            color: var(--text-muted);
            line-height: 1.3;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* Theme Selector */
        .theme-selector {
            position: relative;
        }

        .theme-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition);
        }

        .theme-btn:hover {
            border-color: var(--accent-primary);
        }

        .theme-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all var(--transition);
            z-index: 200;
        }

        .theme-dropdown.open {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background var(--transition);
        }

        .theme-option:hover {
            background: var(--bg-tertiary);
        }

        .theme-option.active {
            background: var(--accent-light);
        }

        .theme-option:first-child {
            border-radius: var(--radius-md) var(--radius-md) 0 0;
        }

        .theme-option:last-child {
            border-radius: 0 0 var(--radius-md) var(--radius-md);
        }

        .theme-swatch {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
        }

        .theme-name {
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .offline-badge {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            background: var(--accent-light);
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .offline-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
        }

        /* ============================================
           MAIN CONTENT
           ============================================ */
        .main-content {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* Editor Layout */
        .editor-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 1024px) {
            .editor-layout {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: all var(--transition);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .panel-title-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
        }

        .panel-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 0.875rem;
            font-size: 0.8125rem;
            font-weight: 500;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition);
            border: none;
            font-family: inherit;
        }

        .btn-icon {
            width: 16px;
            height: 16px;
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover {
            filter: brightness(1.1);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
            padding: 0.375rem 0.5rem;
        }

        .btn-ghost:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        /* Textarea */
        .input-panel .panel-body {
            padding: 0;
        }

        #resume-input {
            width: 100%;
            min-height: 500px;
            padding: 1.25rem;
            border: none;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 0.875rem;
            line-height: 1.7;
            resize: vertical;
            transition: all var(--transition);
        }

        #resume-input:focus {
            outline: none;
        }

        #resume-input::placeholder {
            color: var(--text-muted);
        }

        /* Character Count */
        .input-footer {
            padding: 0.75rem 1.25rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-secondary);
        }

        .char-count {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .save-status {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.75rem;
            color: var(--success);
        }

        .save-status::before {
            content: '‚úì';
        }

        /* Preview Panel */
        .preview-panel .panel-body {
            padding: 1.5rem;
            min-height: 500px;
            overflow-y: auto;
        }

        .view-toggle {
            display: flex;
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm);
            padding: 2px;
        }

        .view-toggle-btn {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 500;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            border-radius: 4px;
            cursor: pointer;
            transition: all var(--transition);
        }

        .view-toggle-btn.active {
            background: var(--bg-primary);
            color: var(--text-primary);
            box-shadow: var(--shadow-sm);
        }

        /* Resume Preview Styles */
        .resume-preview {
            color: var(--text-primary);
        }

        .resume-preview.raw-view {
            font-family: var(--font-mono);
            font-size: 0.875rem;
            white-space: pre-wrap;
            color: var(--text-secondary);
        }

        .resume-name {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
            line-height: 1.2;
        }

        .resume-contact {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem 1rem;
        }

        .resume-contact a {
            color: var(--accent-primary);
            text-decoration: none;
        }

        .resume-contact a:hover {
            text-decoration: underline;
        }

        .resume-section {
            margin-bottom: 1.5rem;
        }

        .resume-section-title {
            font-size: 0.9375rem;
            font-weight: 700;
            color: var(--accent-primary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-primary);
            margin-bottom: 0.875rem;
        }

        .resume-section-content {
            font-size: 0.9375rem;
            line-height: 1.7;
            color: var(--text-secondary);
        }

        .resume-section-content p {
            margin-bottom: 0.75rem;
        }

        .resume-section-content p:last-child {
            margin-bottom: 0;
        }

        .resume-entry {
            margin-bottom: 1.25rem;
        }

        .resume-entry:last-child {
            margin-bottom: 0;
        }

        .resume-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.375rem;
        }

        .resume-entry-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .resume-entry-date {
            font-size: 0.8125rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .resume-entry-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .resume-entry-content ul {
            list-style: none;
            padding-left: 0;
        }

        .resume-entry-content li {
            position: relative;
            padding-left: 1.25rem;
            margin-bottom: 0.375rem;
            color: var(--text-secondary);
            font-size: 0.9375rem;
        }

        .resume-entry-content li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: var(--accent-primary);
            font-weight: bold;
        }

        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .skill-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--accent-light);
            color: var(--accent-primary);
            border-radius: 50px;
            font-size: 0.8125rem;
            font-weight: 500;
        }

        /* Weak Phrase Highlight */
        .weak-phrase {
            background: var(--weak-phrase-bg);
            border: 1px solid var(--weak-phrase-border);
            color: var(--weak-phrase-text);
            padding: 0 0.25rem;
            border-radius: 3px;
            cursor: help;
            position: relative;
        }

        .weak-phrase::after {
            content: attr(data-suggestion);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-primary);
            color: var(--bg-primary);
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition);
            z-index: 10;
        }

        .weak-phrase:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .empty-state-text {
            font-size: 0.875rem;
            max-width: 280px;
        }

        /* Legend */
        .legend {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .legend-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .legend-swatch {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .legend-swatch.weak {
            background: var(--weak-phrase-bg);
            border: 1px solid var(--weak-phrase-border);
        }

        /* ============================================
           TIPS SECTION
           ============================================ */
        .tips-section {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .tips-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .tips-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .tips-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .tips-subtitle {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.25rem;
        }

        .tip-card {
            padding: 1.25rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--accent-primary);
        }

        .tip-card h4 {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tip-card p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* ============================================
           FOOTER
           ============================================ */
        .footer {
            background: var(--bg-primary);
            border-top: 1px solid var(--border-color);
            padding: 1.5rem;
            text-align: center;
        }

        .footer-content {
            max-width: var(--max-width);
            margin: 0 auto;
        }

        .footer-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .footer-heart {
            color: #ef4444;
        }

        .footer-link {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
        }

        .footer-link:hover {
            text-decoration: underline;
        }

        /* ============================================
           FILE INPUT (Hidden)
           ============================================ */
        .file-input {
            display: none;
        }

        /* ============================================
           TOAST NOTIFICATIONS
           ============================================ */
        .toast-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toast {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1.25rem;
            background: var(--text-primary);
            color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            font-size: 0.875rem;
            animation: slideIn 0.2s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success {
            background: #059669;
            color: white;
        }

        .toast.error {
            background: #dc2626;
            color: white;
        }

        /* ============================================
           PRINT STYLES
           ============================================ */
        @media print {
            .header,
            .input-panel,
            .tips-section,
            .footer,
            .panel-header,
            .legend,
            .toast-container {
                display: none !important;
            }

            body {
                background: white;
                color: black;
            }

            .main-content {
                padding: 0;
                max-width: 100%;
            }

            .editor-layout {
                display: block;
            }

            .preview-panel {
                border: none;
                box-shadow: none;
            }

            .preview-panel .panel-body {
                padding: 0;
            }

            .resume-preview {
                color: black !important;
            }

            .resume-section-title {
                color: black !important;
                border-color: black !important;
            }

            .weak-phrase {
                background: #fff3cd !important;
                border-color: #ffc107 !important;
                color: #856404 !important;
            }
        }

        /* ============================================
           RESPONSIVE ADJUSTMENTS
           ============================================ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }

            .logo-section {
                justify-content: center;
            }

            .header-actions {
                justify-content: center;
            }

            .panel-header {
                flex-direction: column;
                gap: 0.75rem;
                align-items: stretch;
            }

            .panel-actions {
                justify-content: center;
                flex-wrap: wrap;
            }

            .tips-grid {
                grid-template-columns: 1fr;
            }

            .resume-entry-header {
                flex-direction: column;
                gap: 0.25rem;
            }

            .toast-container {
                bottom: 16px;
                right: 16px;
                left: 16px;
            }

            .toast {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">üìÑ</div>
                <div class="logo-text">
                    <h1>Offline Resume Viewer</h1>
                    <p>See how your resume actually reads, instantly</p>
                </div>
            </div>
            <div class="header-actions">
                <div class="offline-badge">Offline Ready</div>
                <div class="theme-selector">
                    <button class="theme-btn" id="theme-toggle">
                        <span id="current-theme-icon">‚òÄÔ∏è</span>
                        <span id="current-theme-name">Light</span>
                        <span>‚ñæ</span>
                    </button>
                    <div class="theme-dropdown" id="theme-dropdown">
                        <div class="theme-option" data-theme="light">
                            <span class="theme-swatch" style="background: #ffffff; border-color: #e2e8f0;"></span>
                            <span class="theme-name">Light</span>
                        </div>
                        <div class="theme-option" data-theme="dark">
                            <span class="theme-swatch" style="background: #0f172a;"></span>
                            <span class="theme-name">Dark</span>
                        </div>
                        <div class="theme-option" data-theme="sepia">
                            <span class="theme-swatch" style="background: #fef3c7;"></span>
                            <span class="theme-name">Sepia</span>
                        </div>
                        <div class="theme-option" data-theme="ocean">
                            <span class="theme-swatch" style="background: #ccfbf1;"></span>
                            <span class="theme-name">Ocean</span>
                        </div>
                        <div class="theme-option" data-theme="forest">
                            <span class="theme-swatch" style="background: #dcfce7;"></span>
                            <span class="theme-name">Forest</span>
                        </div>
                        <div class="theme-option" data-theme="slate">
                            <span class="theme-swatch" style="background: #e2e8f0;"></span>
                            <span class="theme-name">Slate</span>
                        </div>
                        <div class="theme-option" data-theme="midnight">
                            <span class="theme-swatch" style="background: #1e1b4b;"></span>
                            <span class="theme-name">Midnight</span>
                        </div>
                        <div class="theme-option" data-theme="paper">
                            <span class="theme-swatch" style="background: #fffbeb;"></span>
                            <span class="theme-name">Paper</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Editor Layout -->
        <div class="editor-layout">
            <!-- Input Panel -->
            <div class="panel input-panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span class="panel-title-icon">‚úèÔ∏è</span>
                        Resume Input
                    </div>
                    <div class="panel-actions">
                        <input type="file" id="file-input" class="file-input" accept=".txt,.md">
                        <button class="btn btn-secondary" id="import-btn">
                            <span class="btn-icon">üì•</span>
                            Import
                        </button>
                        <button class="btn btn-secondary" id="clear-btn">
                            <span class="btn-icon">üóëÔ∏è</span>
                            Clear
                        </button>
                        <button class="btn btn-secondary" id="sample-btn">
                            <span class="btn-icon">üìã</span>
                            Sample
                        </button>
                    </div>
                </div>
                <div class="panel-body">
                    <textarea 
                        id="resume-input" 
                        placeholder="Paste your resume text here...

Example:
JOHN DOE
john.doe@email.com | (555) 123-4567 | New York, NY

SUMMARY
Results-driven software engineer with 5+ years of experience...

EXPERIENCE
Senior Software Engineer | TechCorp Inc. | 2020 - Present
‚Ä¢ Led development of microservices architecture
‚Ä¢ Mentored junior developers and conducted code reviews

SKILLS
JavaScript, Python, React, Node.js, AWS, Docker

EDUCATION
B.S. Computer Science | State University | 2018"
                    ></textarea>
                </div>
                <div class="input-footer">
                    <span class="char-count"><span id="char-count">0</span> characters</span>
                    <span class="save-status" id="save-status" style="display: none;">Auto-saved</span>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="panel preview-panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span class="panel-title-icon">üëÅÔ∏è</span>
                        Preview
                    </div>
                    <div class="panel-actions">
                        <div class="view-toggle">
                            <button class="view-toggle-btn active" data-view="formatted">Formatted</button>
                            <button class="view-toggle-btn" data-view="raw">Raw</button>
                        </div>
                        <button class="btn btn-secondary" id="export-txt-btn">
                            <span class="btn-icon">üìÑ</span>
                            .TXT
                        </button>
                        <button class="btn btn-primary" id="export-html-btn">
                            <span class="btn-icon">üìë</span>
                            .HTML
                        </button>
                        <button class="btn btn-ghost" id="print-btn" title="Print">
                            üñ®Ô∏è
                        </button>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="resume-preview" id="resume-preview">
                        <div class="empty-state" id="empty-state">
                            <div class="empty-state-icon">üìÑ</div>
                            <div class="empty-state-title">No Resume Content</div>
                            <div class="empty-state-text">Paste your resume text in the input area to see a formatted preview</div>
                        </div>
                    </div>
                </div>
                <div class="legend" id="legend" style="display: none;">
                    <div class="legend-title">Legend</div>
                    <div class="legend-items">
                        <div class="legend-item">
                            <span class="legend-swatch weak"></span>
                            <span>Weak phrase (hover for suggestion)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tips Section -->
        <section class="tips-section">
            <div class="tips-header">
                <div class="tips-icon">üí°</div>
                <div>
                    <div class="tips-title">How Recruiters Read Resumes</div>
                    <div class="tips-subtitle">Understanding the 6-second scan</div>
                </div>
            </div>
            <div class="tips-grid">
                <div class="tip-card">
                    <h4>‚ö° The 6-Second Rule</h4>
                    <p>Recruiters spend an average of 6 seconds on initial resume screening. Make your key qualifications immediately visible at the top.</p>
                </div>
                <div class="tip-card">
                    <h4>üìê F-Pattern Reading</h4>
                    <p>Eyes naturally scan in an F-pattern: across the top, down the left side, then across again. Place crucial info along this path.</p>
                </div>
                <div class="tip-card">
                    <h4>üî¢ Quantify Achievements</h4>
                    <p>Numbers catch attention. "Increased sales by 40%" is more impactful than "responsible for increasing sales."</p>
                </div>
                <div class="tip-card">
                    <h4>üéØ Keywords Matter</h4>
                    <p>ATS systems scan for keywords from the job description. Mirror the language used in the posting.</p>
                </div>
                <div class="tip-card">
                    <h4>üìù Action Verbs First</h4>
                    <p>Start bullets with strong action verbs: Led, Developed, Implemented, Achieved. Avoid passive phrases.</p>
                </div>
                <div class="tip-card">
                    <h4>üßπ White Space Wins</h4>
                    <p>Clean formatting with adequate white space improves readability. Dense text blocks get skipped.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">
                Made with <span class="footer-heart">‚ù§Ô∏è</span> by 
                <a href="https://github.com/Aliriyaj007" class="footer-link" target="_blank" rel="noopener">Aliriyaj007</a>
            </p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script>
        // ============================================
        // WEAK PHRASES DATABASE
        // ============================================
        const weakPhrases = [
            { phrase: "responsible for", suggestion: "Try: Led, Managed, Directed, Oversaw" },
            { phrase: "worked on", suggestion: "Try: Developed, Built, Created, Engineered" },
            { phrase: "helped with", suggestion: "Try: Supported, Assisted, Contributed to, Collaborated on" },
            { phrase: "assisted in", suggestion: "Try: Contributed to, Supported, Facilitated" },
            { phrase: "duties included", suggestion: "Try: Key accomplishments, Delivered, Achieved" },
            { phrase: "was tasked with", suggestion: "Try: Spearheaded, Championed, Executed" },
            { phrase: "participated in", suggestion: "Try: Contributed to, Engaged in, Collaborated on" },
            { phrase: "involved in", suggestion: "Try: Instrumental in, Central to, Key contributor" },
            { phrase: "dealt with", suggestion: "Try: Resolved, Addressed, Handled, Managed" },
            { phrase: "handled", suggestion: "Try: Managed, Processed, Coordinated, Administered" },
            { phrase: "various", suggestion: "Be specific about what/how many" },
            { phrase: "etc.", suggestion: "List specific items instead" },
            { phrase: "things", suggestion: "Be specific about what" },
            { phrase: "stuff", suggestion: "Be specific about what" },
            { phrase: "a lot of", suggestion: "Try: Numerous, Multiple, or specify quantity" },
            { phrase: "team player", suggestion: "Show teamwork through specific examples" },
            { phrase: "hard worker", suggestion: "Demonstrate work ethic through achievements" },
            { phrase: "self-motivated", suggestion: "Show initiative through specific actions" },
            { phrase: "detail-oriented", suggestion: "Prove attention to detail with examples" },
            { phrase: "go-getter", suggestion: "Show drive through measurable results" }
        ];

        // ============================================
        // SECTION DETECTION PATTERNS
        // ============================================
        const sectionPatterns = [
            { regex: /^(SUMMARY|PROFESSIONAL SUMMARY|PROFILE|OBJECTIVE|ABOUT|ABOUT ME)$/i, type: 'summary' },
            { regex: /^(EXPERIENCE|WORK EXPERIENCE|PROFESSIONAL EXPERIENCE|EMPLOYMENT|WORK HISTORY|CAREER HISTORY)$/i, type: 'experience' },
            { regex: /^(EDUCATION|ACADEMIC|ACADEMICS|QUALIFICATIONS|ACADEMIC BACKGROUND)$/i, type: 'education' },
            { regex: /^(SKILLS|TECHNICAL SKILLS|CORE COMPETENCIES|COMPETENCIES|EXPERTISE|TECHNOLOGIES)$/i, type: 'skills' },
            { regex: /^(PROJECTS|PROJECT EXPERIENCE|KEY PROJECTS|PERSONAL PROJECTS)$/i, type: 'projects' },
            { regex: /^(CERTIFICATIONS|CERTIFICATES|CREDENTIALS|LICENSES)$/i, type: 'certifications' },
            { regex: /^(ACHIEVEMENTS|AWARDS|HONORS|ACCOMPLISHMENTS|RECOGNITION)$/i, type: 'achievements' },
            { regex: /^(LANGUAGES|LANGUAGE SKILLS)$/i, type: 'languages' },
            { regex: /^(INTERESTS|HOBBIES|ACTIVITIES|EXTRACURRICULAR)$/i, type: 'interests' },
            { regex: /^(REFERENCES|REFERENCES AVAILABLE)$/i, type: 'references' },
            { regex: /^(VOLUNTEER|VOLUNTEERING|COMMUNITY SERVICE)$/i, type: 'volunteer' },
            { regex: /^(PUBLICATIONS|PAPERS|RESEARCH)$/i, type: 'publications' }
        ];

        // ============================================
        // THEME CONFIGURATION
        // ============================================
        const themeIcons = {
            light: '‚òÄÔ∏è',
            dark: 'üåô',
            sepia: 'üìú',
            ocean: 'üåä',
            forest: 'üå≤',
            slate: 'ü™®',
            midnight: 'üåå',
            paper: 'üìÉ'
        };

        const themeNames = {
            light: 'Light',
            dark: 'Dark',
            sepia: 'Sepia',
            ocean: 'Ocean',
            forest: 'Forest',
            slate: 'Slate',
            midnight: 'Midnight',
            paper: 'Paper'
        };

        // ============================================
        // SAMPLE RESUME
        // ============================================
        const sampleResume = `JOHN DOE
john.doe@email.com | (555) 123-4567 | San Francisco, CA | linkedin.com/in/johndoe | github.com/johndoe

SUMMARY
Results-driven Senior Software Engineer with 7+ years of experience designing and implementing scalable web applications. Proven track record of leading cross-functional teams and delivering projects that increased user engagement by 45%. Passionate about clean code, mentorship, and continuous improvement.

EXPERIENCE
Senior Software Engineer | TechCorp Inc. | Jan 2021 - Present
‚Ä¢ Led development of microservices architecture serving 2M+ daily active users
‚Ä¢ Reduced API response times by 60% through database optimization and caching strategies
‚Ä¢ Mentored team of 5 junior developers, conducting code reviews and technical workshops
‚Ä¢ Responsible for implementing CI/CD pipeline using GitHub Actions and AWS

Software Engineer | StartupXYZ | Jun 2018 - Dec 2020
‚Ä¢ Worked on building React-based dashboard that increased user retention by 35%
‚Ä¢ Helped with migration from monolithic architecture to microservices
‚Ä¢ Implemented real-time collaboration features using WebSocket technology
‚Ä¢ Duties included maintaining 95%+ code coverage across all modules

Junior Developer | WebAgency Co. | Aug 2016 - May 2018
‚Ä¢ Participated in development of 15+ client websites
‚Ä¢ Assisted in implementing responsive designs using CSS Grid and Flexbox
‚Ä¢ Dealt with various frontend performance optimization tasks

SKILLS
Languages: JavaScript, TypeScript, Python, Go, SQL
Frontend: React, Vue.js, Next.js, Tailwind CSS, Redux
Backend: Node.js, Express, FastAPI, PostgreSQL, MongoDB, Redis
DevOps: Docker, Kubernetes, AWS, GCP, Terraform, CI/CD
Tools: Git, Jira, Figma, Postman, VS Code

EDUCATION
Bachelor of Science in Computer Science | Stanford University | 2016
‚Ä¢ GPA: 3.8/4.0, Dean's List
‚Ä¢ Relevant Coursework: Data Structures, Algorithms, Database Systems, Web Development

CERTIFICATIONS
‚Ä¢ AWS Solutions Architect Associate | 2022
‚Ä¢ Google Cloud Professional Developer | 2021

PROJECTS
Open Source Contribution | GitHub
‚Ä¢ Core contributor to popular React component library (5k+ stars)
‚Ä¢ Implemented accessibility improvements benefiting 100k+ users

Personal Finance App | Side Project
‚Ä¢ Built full-stack budgeting application used by 500+ monthly active users
‚Ä¢ Tech stack: React, Node.js, PostgreSQL, Stripe integration`;

        // ============================================
        // STATE MANAGEMENT
        // ============================================
        let state = {
            resumeText: '',
            currentTheme: 'light',
            currentView: 'formatted',
            autoSaveTimeout: null
        };

        // ============================================
        // DOM ELEMENTS
        // ============================================
        const elements = {
            resumeInput: document.getElementById('resume-input'),
            resumePreview: document.getElementById('resume-preview'),
            charCount: document.getElementById('char-count'),
            saveStatus: document.getElementById('save-status'),
            emptyState: document.getElementById('empty-state'),
            legend: document.getElementById('legend'),
            themeToggle: document.getElementById('theme-toggle'),
            themeDropdown: document.getElementById('theme-dropdown'),
            currentThemeIcon: document.getElementById('current-theme-icon'),
            currentThemeName: document.getElementById('current-theme-name'),
            fileInput: document.getElementById('file-input'),
            toastContainer: document.getElementById('toast-container')
        };

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            elements.toastContainer.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 200);
            }, 3000);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // ============================================
        // RESUME PARSING
        // ============================================
        function detectSectionType(line) {
            const trimmedLine = line.trim();
            for (const pattern of sectionPatterns) {
                if (pattern.regex.test(trimmedLine)) {
                    return pattern.type;
                }
            }
            return null;
        }

        function isLikelyHeading(line) {
            const trimmed = line.trim();
            if (!trimmed) return false;
            
            // All caps lines (potential headers)
            if (trimmed === trimmed.toUpperCase() && trimmed.length > 2 && trimmed.length < 50) {
                return true;
            }
            
            // Lines ending with colon
            if (trimmed.endsWith(':') && trimmed.length < 50) {
                return true;
            }
            
            return false;
        }

        function isContactLine(line) {
            const trimmed = line.trim().toLowerCase();
            const contactPatterns = [
                /\b[\w.-]+@[\w.-]+\.\w+\b/, // Email
                /\b\d{3}[-.)]\s?\d{3}[-.)]\s?\d{4}\b/, // Phone
                /linkedin\.com|github\.com|twitter\.com|portfolio/i, // Social links
            ];
            return contactPatterns.some(pattern => pattern.test(trimmed));
        }

        function isDateLine(line) {
            const datePatterns = [
                /\b(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\w*\s+\d{4}\b/i,
                /\b\d{4}\s*[-‚Äì]\s*(present|\d{4})\b/i,
                /\b(20\d{2}|19\d{2})\b/
            ];
            return datePatterns.some(pattern => pattern.test(line));
        }

        function extractDateFromLine(line) {
            const datePatterns = [
                /\b((?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\w*\s+\d{4}\s*[-‚Äì]\s*(?:present|(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\w*\s+\d{4}))\b/i,
                /\b(\d{4}\s*[-‚Äì]\s*(?:present|\d{4}))\b/i
            ];
            
            for (const pattern of datePatterns) {
                const match = line.match(pattern);
                if (match) {
                    return match[1];
                }
            }
            return null;
        }

        function parseResume(text) {
            if (!text.trim()) {
                return { sections: [], hasContent: false };
            }

            const lines = text.split('\n');
            const sections = [];
            let currentSection = null;
            let headerInfo = { name: '', contact: [] };
            let isInHeader = true;

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const trimmedLine = line.trim();

                // Skip empty lines at the beginning
                if (!trimmedLine && isInHeader && !headerInfo.name) {
                    continue;
                }

                // Detect section headers
                const sectionType = detectSectionType(trimmedLine);
                if (sectionType) {
                    isInHeader = false;
                    if (currentSection) {
                        sections.push(currentSection);
                    }
                    currentSection = {
                        type: sectionType,
                        title: trimmedLine,
                        content: []
                    };
                    continue;
                }

                // Check for generic headings (all caps or ending with :)
                if (!currentSection && isLikelyHeading(trimmedLine) && !isInHeader) {
                    if (currentSection) {
                        sections.push(currentSection);
                    }
                    currentSection = {
                        type: 'generic',
                        title: trimmedLine.replace(/:$/, ''),
                        content: []
                    };
                    continue;
                }

                // Header processing (name and contact)
                if (isInHeader) {
                    if (!headerInfo.name && trimmedLine && !isContactLine(trimmedLine)) {
                        headerInfo.name = trimmedLine;
                    } else if (isContactLine(trimmedLine) || (headerInfo.name && !trimmedLine)) {
                        if (trimmedLine) {
                            headerInfo.contact.push(trimmedLine);
                        }
                        // Check if next non-empty line is a section header
                        let nextNonEmpty = i + 1;
                        while (nextNonEmpty < lines.length && !lines[nextNonEmpty].trim()) {
                            nextNonEmpty++;
                        }
                        if (nextNonEmpty < lines.length && detectSectionType(lines[nextNonEmpty].trim())) {
                            isInHeader = false;
                        }
                    } else if (trimmedLine) {
                        // Could be a subtitle or tagline
                        if (headerInfo.name && !headerInfo.subtitle) {
                            headerInfo.subtitle = trimmedLine;
                        } else {
                            headerInfo.contact.push(trimmedLine);
                        }
                    }
                    continue;
                }

                // Add content to current section
                if (currentSection) {
                    currentSection.content.push(line);
                }
            }

            // Push last section
            if (currentSection) {
                sections.push(currentSection);
            }

            return {
                header: headerInfo,
                sections: sections,
                hasContent: true
            };
        }

        // ============================================
        // WEAK PHRASE HIGHLIGHTING
        // ============================================
        function highlightWeakPhrases(text) {
            let result = text;
            
            for (const { phrase, suggestion } of weakPhrases) {
                const regex = new RegExp(`\\b(${phrase})\\b`, 'gi');
                result = result.replace(regex, 
                    `<span class="weak-phrase" data-suggestion="${suggestion}">$1</span>`
                );
            }
            
            return result;
        }

        // ============================================
        // RENDER FUNCTIONS
        // ============================================
        function renderSkillsSection(content) {
            const contentText = content.join('\n').trim();
            if (!contentText) return '';

            // Try to detect skill categories
            const lines = contentText.split('\n').filter(l => l.trim());
            let html = '<div class="skills-content">';

            for (const line of lines) {
                const trimmed = line.trim();
                if (!trimmed) continue;

                // Check for "Category: skill1, skill2" format
                if (trimmed.includes(':')) {
                    const [category, skills] = trimmed.split(':').map(s => s.trim());
                    if (skills) {
                        html += `<p><strong>${escapeHtml(category)}:</strong></p>`;
                        html += '<div class="skills-list">';
                        skills.split(/[,;|]/).forEach(skill => {
                            const trimmedSkill = skill.trim();
                            if (trimmedSkill) {
                                html += `<span class="skill-tag">${escapeHtml(trimmedSkill)}</span>`;
                            }
                        });
                        html += '</div>';
                    }
                } else {
                    // Simple comma-separated list
                    html += '<div class="skills-list">';
                    trimmed.split(/[,;|]/).forEach(skill => {
                        const trimmedSkill = skill.trim();
                        if (trimmedSkill) {
                            html += `<span class="skill-tag">${escapeHtml(trimmedSkill)}</span>`;
                        }
                    });
                    html += '</div>';
                }
            }

            html += '</div>';
            return html;
        }

        function renderExperienceSection(content) {
            const contentText = content.join('\n');
            const lines = contentText.split('\n');
            let html = '';
            let currentEntry = null;

            for (const line of lines) {
                const trimmed = line.trim();
                if (!trimmed) continue;

                // Check if this is a new entry (job title line)
                // Usually contains company name and/or date
                const date = extractDateFromLine(trimmed);
                const isBullet = trimmed.startsWith('‚Ä¢') || trimmed.startsWith('-') || trimmed.startsWith('*');

                if (!isBullet && (date || (trimmed.includes('|') && !isBullet))) {
                    // Save previous entry
                    if (currentEntry) {
                        html += renderEntry(currentEntry);
                    }
                    
                    // Parse new entry header
                    const parts = trimmed.split('|').map(p => p.trim());
                    currentEntry = {
                        title: parts[0] || '',
                        subtitle: parts.length > 2 ? parts[1] : '',
                        date: date || (parts.length > 2 ? parts[2] : parts[1]) || '',
                        bullets: []
                    };
                } else if (isBullet && currentEntry) {
                    // Add bullet to current entry
                    const bulletText = trimmed.replace(/^[‚Ä¢\-*]\s*/, '');
                    currentEntry.bullets.push(highlightWeakPhrases(escapeHtml(bulletText)));
                } else if (currentEntry) {
                    // Could be a subtitle or continuation
                    if (!currentEntry.subtitle) {
                        currentEntry.subtitle = trimmed;
                    } else {
                        currentEntry.bullets.push(highlightWeakPhrases(escapeHtml(trimmed)));
                    }
                } else {
                    // Orphan content, create new entry
                    currentEntry = {
                        title: trimmed,
                        subtitle: '',
                        date: date || '',
                        bullets: []
                    };
                }
            }

            // Save last entry
            if (currentEntry) {
                html += renderEntry(currentEntry);
            }

            return html;
        }

        function renderEntry(entry) {
            let html = '<div class="resume-entry">';
            html += '<div class="resume-entry-header">';
            html += `<span class="resume-entry-title">${escapeHtml(entry.title)}</span>`;
            if (entry.date) {
                html += `<span class="resume-entry-date">${escapeHtml(entry.date)}</span>`;
            }
            html += '</div>';
            
            if (entry.subtitle) {
                html += `<div class="resume-entry-subtitle">${escapeHtml(entry.subtitle)}</div>`;
            }
            
            if (entry.bullets.length > 0) {
                html += '<div class="resume-entry-content"><ul>';
                entry.bullets.forEach(bullet => {
                    html += `<li>${bullet}</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '</div>';
            return html;
        }

        function renderGenericSection(content) {
            const contentText = content.join('\n').trim();
            if (!contentText) return '';

            const lines = contentText.split('\n');
            let html = '<div class="resume-section-content">';
            let inList = false;

            for (const line of lines) {
                const trimmed = line.trim();
                if (!trimmed) continue;

                const isBullet = trimmed.startsWith('‚Ä¢') || trimmed.startsWith('-') || trimmed.startsWith('*');
                
                if (isBullet) {
                    if (!inList) {
                        html += '<ul>';
                        inList = true;
                    }
                    const bulletText = trimmed.replace(/^[‚Ä¢\-*]\s*/, '');
                    html += `<li>${highlightWeakPhrases(escapeHtml(bulletText))}</li>`;
                } else {
                    if (inList) {
                        html += '</ul>';
                        inList = false;
                    }
                    html += `<p>${highlightWeakPhrases(escapeHtml(trimmed))}</p>`;
                }
            }

            if (inList) {
                html += '</ul>';
            }

            html += '</div>';
            return html;
        }

        function renderFormattedResume(text) {
            const parsed = parseResume(text);
            
            if (!parsed.hasContent) {
                elements.emptyState.style.display = 'flex';
                elements.legend.style.display = 'none';
                return '';
            }

            elements.emptyState.style.display = 'none';
            elements.legend.style.display = 'block';

            let html = '';

            // Render header
            if (parsed.header.name) {
                html += `<div class="resume-name">${escapeHtml(parsed.header.name)}</div>`;
            }
            
            if (parsed.header.contact.length > 0) {
                html += '<div class="resume-contact">';
                parsed.header.contact.forEach(item => {
                    // Make emails and links clickable
                    let processed = escapeHtml(item);
                    processed = processed.replace(
                        /\b([\w.-]+@[\w.-]+\.\w+)\b/g, 
                        '<a href="mailto:$1">$1</a>'
                    );
                    processed = processed.replace(
                        /\b((?:https?:\/\/)?(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi,
                        function(match) {
                            const href = match.startsWith('http') ? match : 'https://' + match;
                            return `<a href="${href}" target="_blank" rel="noopener">${match}</a>`;
                        }
                    );
                    html += `<span>${processed}</span>`;
                });
                html += '</div>';
            }

            // Render sections
            for (const section of parsed.sections) {
                html += '<div class="resume-section">';
                html += `<div class="resume-section-title">${escapeHtml(section.title.replace(/:$/, ''))}</div>`;
                
                switch (section.type) {
                    case 'skills':
                        html += renderSkillsSection(section.content);
                        break;
                    case 'experience':
                    case 'projects':
                    case 'volunteer':
                        html += renderExperienceSection(section.content);
                        break;
                    case 'education':
                    case 'certifications':
                        html += renderExperienceSection(section.content);
                        break;
                    default:
                        html += renderGenericSection(section.content);
                }
                
                html += '</div>';
            }

            return html;
        }

        function renderRawView(text) {
            if (!text.trim()) {
                elements.emptyState.style.display = 'flex';
                elements.legend.style.display = 'none';
                return '';
            }

            elements.emptyState.style.display = 'none';
            elements.legend.style.display = 'block';

            return highlightWeakPhrases(escapeHtml(text));
        }

        function updatePreview() {
            const text = elements.resumeInput.value;
            state.resumeText = text;

            // Update character count
            elements.charCount.textContent = text.length;

            // Render based on current view
            if (state.currentView === 'formatted') {
                elements.resumePreview.classList.remove('raw-view');
                elements.resumePreview.innerHTML = renderFormattedResume(text) || elements.emptyState.outerHTML;
            } else {
                elements.resumePreview.classList.add('raw-view');
                elements.resumePreview.innerHTML = renderRawView(text) || elements.emptyState.outerHTML;
            }
        }

        // ============================================
        // STORAGE FUNCTIONS
        // ============================================
        function saveToLocalStorage() {
            try {
                localStorage.setItem('resumeViewer_text', state.resumeText);
                localStorage.setItem('resumeViewer_theme', state.currentTheme);
                elements.saveStatus.style.display = 'inline-flex';
                setTimeout(() => {
                    elements.saveStatus.style.display = 'none';
                }, 2000);
            } catch (e) {
                console.warn('LocalStorage not available:', e);
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedText = localStorage.getItem('resumeViewer_text');
                const savedTheme = localStorage.getItem('resumeViewer_theme');
                
                if (savedText) {
                    elements.resumeInput.value = savedText;
                    state.resumeText = savedText;
                }
                
                if (savedTheme && themeNames[savedTheme]) {
                    setTheme(savedTheme);
                }
            } catch (e) {
                console.warn('LocalStorage not available:', e);
            }
        }

        const debouncedSave = debounce(saveToLocalStorage, 1000);

        // ============================================
        // THEME FUNCTIONS
        // ============================================
        function setTheme(themeName) {
            state.currentTheme = themeName;
            document.documentElement.setAttribute('data-theme', themeName);
            elements.currentThemeIcon.textContent = themeIcons[themeName];
            elements.currentThemeName.textContent = themeNames[themeName];

            // Update active state in dropdown
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.toggle('active', option.dataset.theme === themeName);
            });

            saveToLocalStorage();
        }

        function toggleThemeDropdown() {
            elements.themeDropdown.classList.toggle('open');
        }

        // ============================================
        // IMPORT/EXPORT FUNCTIONS
        // ============================================
        function importFile() {
            elements.fileInput.click();
        }

        function handleFileImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                elements.resumeInput.value = e.target.result;
                updatePreview();
                saveToLocalStorage();
                showToast('Resume imported successfully!');
            };
            reader.onerror = () => {
                showToast('Error reading file', 'error');
            };
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }

        function exportAsTxt() {
            const text = elements.resumeInput.value;
            if (!text.trim()) {
                showToast('No content to export', 'error');
                return;
            }

            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'resume.txt';
            a.click();
            URL.revokeObjectURL(url);
            showToast('Resume exported as TXT!');
        }

        function exportAsHtml() {
            const text = elements.resumeInput.value;
            if (!text.trim()) {
                showToast('No content to export', 'error');
                return;
            }

            const previewHtml = renderFormattedResume(text);
            const fullHtml = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
            color: #1e293b;
        }
        .resume-name {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        .resume-contact {
            font-size: 0.875rem;
            color: #475569;
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem 1rem;
        }
        .resume-contact a { color: #2563eb; text-decoration: none; }
        .resume-section { margin-bottom: 1.5rem; }
        .resume-section-title {
            font-size: 0.9375rem;
            font-weight: 700;
            color: #2563eb;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #2563eb;
            margin-bottom: 0.875rem;
        }
        .resume-entry { margin-bottom: 1.25rem; }
        .resume-entry-header {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.375rem;
        }
        .resume-entry-title { font-weight: 600; }
        .resume-entry-date { font-size: 0.8125rem; color: #64748b; font-style: italic; }
        .resume-entry-subtitle { font-size: 0.875rem; color: #475569; margin-bottom: 0.5rem; }
        .resume-entry-content ul { list-style: none; padding-left: 0; }
        .resume-entry-content li {
            position: relative;
            padding-left: 1.25rem;
            margin-bottom: 0.375rem;
            color: #475569;
        }
        .resume-entry-content li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: #2563eb;
        }
        .skills-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .skill-tag {
            padding: 0.25rem 0.75rem;
            background: #dbeafe;
            color: #2563eb;
            border-radius: 50px;
            font-size: 0.8125rem;
        }
        .weak-phrase {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 0 0.25rem;
            border-radius: 3px;
        }
        @media print {
            body { padding: 0; }
            .weak-phrase { background: #fff3cd; border-color: #ffc107; color: #856404; }
        }
    </style>
</head>
<body>
    ${previewHtml}
</body>
</html>`;

            const blob = new Blob([fullHtml], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'resume.html';
            a.click();
            URL.revokeObjectURL(url);
            showToast('Resume exported as HTML!');
        }

        function printResume() {
            window.print();
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        function initEventListeners() {
            // Resume input
            elements.resumeInput.addEventListener('input', () => {
                updatePreview();
                debouncedSave();
            });

            // Theme toggle
            elements.themeToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleThemeDropdown();
            });

            // Theme options
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    setTheme(option.dataset.theme);
                    elements.themeDropdown.classList.remove('open');
                });
            });

            // Close dropdown on outside click
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.theme-selector')) {
                    elements.themeDropdown.classList.remove('open');
                }
            });

            // View toggle
            document.querySelectorAll('.view-toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.view-toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.currentView = btn.dataset.view;
                    updatePreview();
                });
            });

            // Import button
            document.getElementById('import-btn').addEventListener('click', importFile);
            elements.fileInput.addEventListener('change', handleFileImport);

            // Clear button
            document.getElementById('clear-btn').addEventListener('click', () => {
                if (elements.resumeInput.value && confirm('Clear all resume content?')) {
                    elements.resumeInput.value = '';
                    updatePreview();
                    saveToLocalStorage();
                    showToast('Content cleared');
                }
            });

            // Sample button
            document.getElementById('sample-btn').addEventListener('click', () => {
                elements.resumeInput.value = sampleResume;
                updatePreview();
                saveToLocalStorage();
                showToast('Sample resume loaded');
            });

            // Export buttons
            document.getElementById('export-txt-btn').addEventListener('click', exportAsTxt);
            document.getElementById('export-html-btn').addEventListener('click', exportAsHtml);
            document.getElementById('print-btn').addEventListener('click', printResume);

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + S to save (prevent default and show saved status)
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                    e.preventDefault();
                    saveToLocalStorage();
                    showToast('Saved!');
                }
                
                // Ctrl/Cmd + P to print
                if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                    e.preventDefault();
                    printResume();
                }
            });
        }

        // ============================================
        // SERVICE WORKER REGISTRATION (for offline)
        // ============================================
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                // Create a simple service worker inline using a blob
                const swCode = `
                    const CACHE_NAME = 'resume-viewer-v1';
                    
                    self.addEventListener('install', (event) => {
                        self.skipWaiting();
                    });
                    
                    self.addEventListener('activate', (event) => {
                        event.waitUntil(clients.claim());
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request).then((response) => {
                                return response || fetch(event.request).then((fetchResponse) => {
                                    // Clone the response for caching
                                    const responseClone = fetchResponse.clone();
                                    caches.open(CACHE_NAME).then((cache) => {
                                        cache.put(event.request, responseClone);
                                    });
                                    return fetchResponse;
                                });
                            }).catch(() => {
                                // Return cached version if offline
                                return caches.match(event.request);
                            })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl).catch(() => {
                    console.log('Service worker registration skipped (same-origin policy)');
                });
            }
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        function init() {
            loadFromLocalStorage();
            updatePreview();
            initEventListeners();
            registerServiceWorker();
            
            // Mark active theme
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.toggle('active', option.dataset.theme === state.currentTheme);
            });
        }

        // Start the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>